
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="index, follow" name="robots"/>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&amp;family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&amp;display=swap" rel="stylesheet"/>
<link href="https://rousebrowse.com/theme/stylesheet/style.min.css" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/stylesheet/dark-theme.min.css" id="dark-theme-style" media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/pygments/zenburn.min.css" id="pygments-dark-theme" media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/pygments/emacs.min.css" id="pygments-light-theme" media="(prefers-color-scheme: light)" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<link href="https://rousebrowse.com/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="https://rousebrowse.com/images/favicon.ico" rel="icon" type="image/x-icon"/>
<meta content="Ryan Squires" name="author"/>
<meta content="I didn't hear no bell" name="description"/>
<meta content="github, python, pelican, devcontainers, vscode, docker, pages, gh-pages" name="keywords"/>
<meta content="Blog" property="og:site_name">
<meta content="Pelican on GitHub Pages" property="og:title"/>
<meta content="I didn't hear no bell" property="og:description"/>
<meta content="en_US" property="og:locale"/>
<meta content="https://rousebrowse.com/pelican-on-github-pages.html" property="og:url"/>
<meta content="article" property="og:type"/>
<meta content="2023-08-12 00:00:00-07:00" property="article:published_time"/>
<meta content="" property="article:modified_time"/>
<meta content="https://rousebrowse.com/author/ryan-squires.html" property="article:author"/>
<meta content="Guides" property="article:section">
<meta content="github" property="article:tag"/>
<meta content="python" property="article:tag"/>
<meta content="pelican" property="article:tag"/>
<meta content="devcontainers" property="article:tag"/>
<meta content="vscode" property="article:tag"/>
<meta content="docker" property="article:tag"/>
<meta content="pages" property="article:tag"/>
<meta content="gh-pages" property="article:tag"/>
<meta content="https://rousebrowse.com/images/profile.jpeg" property="og:image"/>
<title>Blog – Pelican on GitHub Pages</title>
</meta></meta></head>
<body>
<aside>
<div>
<a href="https://rousebrowse.com/">
<img alt="Rouse Browse" src="https://rousebrowse.com/images/profile.jpeg" title="Rouse Browse"/>
</a>
<h1>
<a href="https://rousebrowse.com/">Rouse Browse</a>
</h1>
<p>What is this new devvery?</p>
<ul class="social">
<li>
<a class="sc-github" href="https://github.com/rsquires1988" target="_blank">
<i class="fa-brands fa-github"></i>
</a>
</li>
<li>
<a class="sc-linkedin" href="https://www.linkedin.com/in/ryan-squires-0a15841b0/" target="_blank">
<i class="fa-brands fa-linkedin"></i>
</a>
</li>
<li>
<a class="sc-instagram" href="https://www.instagram.com/rysquoi/" target="_blank">
<i class="fa-brands fa-instagram"></i>
</a>
</li>
</ul>
</div>
</aside>
<main>
<nav>
<a href="https://rousebrowse.com/">Home</a>
</nav>
<article class="single">
<header>
<h1 id="pelican-on-github-pages">Pelican on GitHub Pages</h1>
<p>
      Posted on Sat 12 August 2023 in <a href="https://rousebrowse.com/category/guides.html">Guides</a>
</p>
</header>
<div>
<!-- language: lang-bash -->
<p><img alt="SQUAAAAWK!" class="image-process-article-image" src="https://rousebrowse.com/images/derivatives/article-image/goofypelican.jpeg"/></p>
<h2>Read the docs.  No, the other docs.</h2>
<p>If you happen to be trying to set up a Pelican site using github pages, just <a href="https://docs.getpelican.com/en/latest/tips.html">follow the Pelican docs' tips page</a>. Originally, I found a link on Pelican's wiki page to an outdated guide using the <a href="https://github.com/marketplace/actions/pelican-to-github-pages">pelican-to-github-pages action</a> that has fallen into disrepair.  But there's good news!  All of the tools you need are built into Pelican, git, and github directly. In my (many) attempts at getting that action working though, I learned a lot about <a href="https://code.visualstudio.com/docs/devcontainers/containers">VSCode's dev containers implementation</a>. That part of the project stuck, and I absolutely recommend giving them a shot. For extra fun, I happened to be SSHing into my burgeoning homelab's raspberry pi throughout this process, which surprisingly, thanks to VSCode's remote explorer extension, really didn't add much complexity, to my surprise. Here's a brief breakdown of how to get it all that up and running.</p>
<ol>
<li><a href="https://docs.docker.com/desktop/">Install Docker</a> on all machines involved</li>
<li>On the machine on which you want the dev container to be hosted, follow steps 1-4 <a href="https://cloudbytes.dev/snippets/automate-deployment-of-pelican-website-to-github-pages">here</a> to get your Pelican dev container up and running.</li>
<li>Once that's up, <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages">create your Github pages site repository</a> and connect it as a remote to your local repo. I chose to make a "Project" site, meaning your main branch will contain your Pelican configs and assets, and your site's actual html will be on the gh-pages branch.</li>
<li>
<p>In your pelicanconf.py file, located in <code>workspaces/&lt;gh-username&gt;.github.io/</code>, make sure the following variables are set, in addition to the ones set automatically by the <code>pelican-autoconfig</code> command you ran in Step 2. Careful: here there be gotchas.</p>
<div class="highlight"><pre><span></span><code><span class="n">SITEURL</span> <span class="o">=</span> <span class="s1">'https://your.url.com'</span>    <span class="c1"># either your-username.github.io or a custom domain</span>
<span class="n">PATH</span> <span class="o">=</span> <span class="s1">'content'</span>
<span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="s1">'output'</span>
<span class="n">DELETE_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="kc">True</span>      <span class="c1"># possibly unnecessary, but I used it</span>
</code></pre></div>
<ul>
<li>
<p>If you're using a custom URL, <a href="https://docs.getpelican.com/en/latest/tips.html#copy-static-files-to-the-root-of-your-site">follow this section of the docs'</a> instructions. The CNAME file should be created in <code>content/extras/</code>, and should contain your custom URL, sans http(s)://. Then, add the following to pelicanconf.py:</p>
<div class="highlight"><pre><span></span><code><span class="n">STATIC_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'images'</span><span class="p">,</span> <span class="s1">'extra/CNAME'</span><span class="p">,]</span>
<span class="n">EXTRA_PATH_METADATA</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'extra/CNAME'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'path'</span><span class="p">:</span> <span class="s1">'CNAME'</span><span class="p">},}</span>
</code></pre></div>
</li>
<li>
<p>I also suggest setting up a <a href="https://github.com/getpelican/pelican-themes">theme</a>. I cloned the aforelinked repo to my devcontainer's home directory, <code>/home/vscode/</code>, as per its README, and then back in <code>pelicanconf.py</code>, added</p>
<div class="highlight"><pre><span></span><code><span class="n">THEME</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vscode</span><span class="o">/</span><span class="n">pelican</span><span class="o">-</span><span class="n">themes</span><span class="o">/&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">choice</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">theme</span><span class="o">&gt;</span>
</code></pre></div>
</li>
</ul>
</li>
<li>
<p>For future repo cleanliness, I added <code>output/</code>, <code>__pycache__/</code>, and <code>.gitignore</code> to a .gitignore file (create it if it doesn't exist yet) in the main branches' root directory.  This prevents the output directory from existing in both branches, which I found sometimes confused git, causing a need for multiple commits.</p>
<ul>
<li>Now, follow the Pelican docs' <a href="https://docs.getpelican.com/en/latest/tips.html#publishing-to-github">guide on publishing a project page to github</a>.</li>
<li>In order to do this automatically every time you commit, follow <a href="https://docs.getpelican.com/en/latest/tips.html#update-your-site-on-each-commit">this</a>. You may need to create the "post-commit" file it mentions (I did). If you plan on having both your project and site branches, I recommend tweaking the suggested command a bit to push both branches simultaneously: <div class="highlight"><pre><span></span><code>pelican<span class="w"> </span>content<span class="w"> </span>-o<span class="w"> </span>output<span class="w"> </span>-s<span class="w"> </span>pelicanconf.py<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
ghp-import<span class="w"> </span>output<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
git<span class="w"> </span>push<span class="w"> </span>--all<span class="w"> </span>origin
</code></pre></div>
</li>
</ul>
</li>
<li>
<p>At this point, after github runs its github-pages action, you should have a website, available either at <code>&lt;your-username&gt;.github.io</code>, or the custom URL you defined earlier.</p>
</li>
</ol>
<p><strong>Bonus!</strong>  Looking for an easy way to get images (or other files) onto your devcontainer? No problem! Docker to the rescue:</p>
<ul>
<li>
<p>First, find your devcontainer's given name on the container's host with <code>docker ps</code>.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>cp<span class="w"> </span>/path/and/filename.jpg<span class="w"> </span>&lt;container_name&gt;:/workspaces/&lt;ghUsername&gt;.github.io/content/images/
</code></pre></div>
</li>
<li>
<p>If you're hosting the devcontainer on another machine and SSH-ing in, there's an extra wrinkle:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>context<span class="w"> </span>create<span class="w"> </span>&lt;name-of-host&gt;<span class="w"> </span>--docker<span class="w"> </span><span class="s2">"host=ssh://&lt;username&gt;@&lt;IP&gt;"</span>
docker<span class="w"> </span>--context<span class="w"> </span>&lt;name-of-host&gt;<span class="w"> </span>cp<span class="w"> </span>/path/and/filename.jpg<span class="w"> </span>elated_robinson:/workspaces/&lt;ghUsername&gt;.github.io/content/images/
</code></pre></div>
<p>The <code>&lt;name-of-host&gt;</code> there is entirely arbitrary and just for docker's use to identify the context you're creating.</p>
</li>
</ul>
<h6>Now to write some content...</h6>
</div>
<div class="tag-cloud">
<p>
<a href="https://rousebrowse.com/tag/github.html">github</a>
<a href="https://rousebrowse.com/tag/python.html">python</a>
<a href="https://rousebrowse.com/tag/pelican.html">pelican</a>
<a href="https://rousebrowse.com/tag/devcontainers.html">devcontainers</a>
<a href="https://rousebrowse.com/tag/vscode.html">vscode</a>
<a href="https://rousebrowse.com/tag/docker.html">docker</a>
<a href="https://rousebrowse.com/tag/pages.html">pages</a>
<a href="https://rousebrowse.com/tag/gh-pages.html">gh-pages</a>
</p>
</div>
</article>
<footer>
<p>© 2023 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script data-default-theme="dark" data-enable-auto-detect-theme="True" id="dark-theme-script" src="https://rousebrowse.com/theme/dark-theme/dark-theme.min.js" type="text/javascript">
</script>
</p></footer> </main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Blog ",
  "url" : "https://rousebrowse.com",
  "image": "https://rousebrowse.com/images/profile.jpeg",
  "description": "'It's not safe out here. It's wondrous, with treasures to satiate desires both subtle and gross. But it's not for the timid.'"
}
</script>
</body>
</html>